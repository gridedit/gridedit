(function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=function(){function a(b,c){var d,e,f,g;if(this.config=b,this.actionStack=c,this.dirtyCells=[],this.dirtyRows=[],this.uniqueValueKey=this.config.uniqueValueKey,this.rowIndex=this.config.rowIndex,this.useFixedHeaders=this.config.useFixedHeaders,this.element=document.querySelectorAll(this.config.element||"#gridedit")[0],this.contextMenu=new a.ContextMenu(this),this.themeName=this.config.themeName,this.customTheme=this.config.themeTemplate,this.theme=new a.Theme(this.themeName,this.customTheme),this.draggingRow=null,this.lastDragOver=null,this.lastDragOverIsBeforeFirstRow=!1,this.lastClickCell=null,this.headers=[],this.rows=[],this.subtotalRows=[],this.cols=[],this.source=this.config.rows,this.redCells=[],this.activeCells=[],this.copiedCells=null,this.selectionStart=null,this.selectionEnd=null,this.selectedCol=null,this.openCell=null,this.state="ready",this.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.topOffset=this.config.topOffset?this.config.topOffset:0,this.config.custom){g=this.config.custom;for(e in g)f=g[e],e in this.config.custom&&this.set(e,f);delete this.config.custom}this.config.initialize&&this.init(),this.copiedCellMatrix=null,this.actionStack||(this.actionStack=new a.ActionStack(this)),this.config.selectedCell&&(d=this.getCell(this.config.selectedCell[0],this.config.selectedCell[1]),d&&d.makeActive(),this.config.selectedCell=void 0)}return a.prototype.init=function(){this.config.beforeInit&&this.config.beforeInit(),a.Hook.prototype.initTableHooks(this),this.build(),this.events(),this.render(),this.removeBrowserHighlighting(),this.rowIndex||this.setRowIndexes(),this.config.afterInit&&this.config.afterInit()},a.prototype.setRowIndexes=function(){var a,b,c,d,e,f,g;if(!this.config.uniqueValueKey)return!1;for(c={},d=this.config.uniqueValueKey,g=this.source,a=e=0,f=g.length;f>e;a=++e)b=g[a],c[a]=b[d];return this.rowIndex=c},a.prototype.removeBrowserHighlighting=function(){var a,b,c,d,e;for(b=["-webkit-touch-callout","-webkit-user-select","-khtml-user-select","-moz-user-select","-ms-user-select","user-select"],e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.tableEl.style[a]="none");return e},a.prototype.build=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(l=document.createElement("tr"),this.config.includeRowHandles&&(e=document.createElement("th"),l.appendChild(e)),q=this.config.cols,f=m=0,o=q.length;o>m;f=++m)c=q[f],b=new a.Column(c,this),this.cols.push(b),l.appendChild(b.element);for(this.thead=document.createElement("thead"),d=this,this.thead.ondragenter=function(){var a;return d.lastDragOverIsBeforeFirstRow=!0,a=d.lastDragOver,a?(a.element.style.borderBottom=a.oldBorderBottom,a.element.style.borderTop=d.theme.borders.dragBorderStyle):void 0},this.thead.ondragleave=function(){var a;return a=d.rows[0],a.element.style.borderTop=a.oldBorderTop},this.thead.appendChild(l),k=document.createElement("tbody"),r=this.source,f=n=0,p=r.length;p>n;f=++n){switch(h=r[f],h.gridEditRowType){case"static":g=new a.StaticRow(h,this);break;case"subtotal":g=new a.SubTotalRow(h,this);break;case"heading":g=new a.HeaderRow(h,this);break;case"custom":i=h.customClassName||"GenericRow",g=new a[i](h,this);break;default:g=new a.GenericRow(h,this)}this.rows.push(g),k.appendChild(g.element)}return j=document.createElement("table"),a.Utilities.prototype.setAttributes(j,{id:"editable-grid","class":this.config.tableClass}),j.appendChild(this.thead),j.appendChild(k),this.tableEl=j,this.useFixedHeaders?(a.Utilities.prototype.fixHeaders(this),window.addEventListener("resize",function(){return a.Utilities.prototype.fixHeaders(d)})):void 0},a.prototype.rebuild=function(a){var b,c,d,e;if(null==a&&(a=null),this.contextMenu.hide(),c=Object.create(this.config),c.rowIndex=this.rowIndex,null!==a)for(d in a)e=a[d],c[d]=a[d];return b=this.actionStack,this.destroy(),this.constructor(c,b)},a.prototype.hideControl=function(){return this.openCell?this.openCell.edit(this.openCell.control.value):void 0},a.prototype.events=function(){var b;return b=this,document.onkeydown=function(a){var d,e,f,g,h;if(b.activeCell())if(g=a.keyCode,h=a.shiftKey,f=a.ctrlKey,e=a.metaKey,e||f){if(g&&91!==g&&92!==g&&(d=b.contextMenu.actionCallbacks.byControl[g]))return a.preventDefault(),b.contextMenu.execute(d,a)}else switch(g){case 8:b.openCell||(a.preventDefault(),b["delete"]());break;case 9:return a.preventDefault(),b.moveTo(h?b.previousCell():b.nextCell());case 13:b.activeCell().onReturnKeyPress();break;case 16:break;case 32:b.openCell||(a.preventDefault(),b.activeCell().onSpaceKeyPress());break;case 37:b.moveTo(b.previousCell());break;case 38:b.moveTo(b.aboveCell());break;case 39:b.activeCell().isBeingEdited()||b.moveTo(b.nextCell());break;case 40:b.moveTo(b.belowCell());break;case 46:if(!b.openCell){a.preventDefault(),b["delete"]();break}break;default:return c.call([96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111],g)>=0&&(g-=48),b.openCellAndPopulateInitialValue(h,g)}},window.onresize=function(){return b.openCell?a.Utilities.prototype.setStyles(b.openCell.control,b.openCell.position()):void 0},window.onscroll=function(){return b.openCell?b.openCell.reposition():void 0},this.element.onscroll=function(){return b.useFixedHeaders?a.Utilities.prototype.repositionFixedHeader(b):void 0},this.tableEl.oncontextmenu=function(){return!1},document.oncontextmenu=function(a){return b.contextMenu.element===a.target?!1:!0},document.onclick=function(c){var d;return d=b.firstActiveCell(),b.isDescendant(c.target||b.contextMenu.isVisible())||c.target!==(null!=d?d.control:void 0)&&((null!=d?d.isBeingEdited():void 0)&&null!=d&&d.edit(null!=d?d.control.value:void 0),a.Utilities.prototype.clearActiveCells(b)),b.contextMenu.hide()}},a.prototype.render=function(){return this.element.hasChildNodes()&&(this.element=document.querySelectorAll(this.config.element||"#gridedit")[0]),this.element.appendChild(this.tableEl)},a.prototype.getCell=function(a,b){var c;try{return this.rows[a].cells[b]}catch(d){c=d}},a.prototype.set=function(a,b){return void 0!==a?this.config[a]=b:void 0},a.prototype.activeCell=function(){return this.activeCells.length>1?this.activeCells:this.activeCells[0]},a.prototype.firstActiveCell=function(){return this.activeCells[0]},a.prototype.nextCell=function(){var a;return null!=(a=this.firstActiveCell())?a.next():void 0},a.prototype.previousCell=function(){var a;return null!=(a=this.firstActiveCell())?a.previous():void 0},a.prototype.aboveCell=function(){var a;return null!=(a=this.firstActiveCell())?a.above():void 0},a.prototype.belowCell=function(){var a;return null!=(a=this.firstActiveCell())?a.below():void 0},a.prototype.moveTo=function(a,b){var c,d,e,f,g;return a&&(void 0===b&&(b=a.table.firstActiveCell()),d=a.table.getDirection(b,a),a.beforeNavigateTo&&(c=a.beforeNavigateTo(a,b,d)),c!==!1&&(a.isVisible()||(g=a.table.activeCell().address[0],f=a.address[0],e=1,g>f&&(e=-1),window.scrollBy(0,(null!=a?a.position().height:void 0)*e)),a.makeActive())),!1},a.prototype.getDirection=function(a,b){var c,d,e,f,g;return e=a.address[0],g=b.address[0],d=a.address[1],f=b.address[1],e===g?d>f?c="left":f>d?c="right":console.log("Cannot calculate direction going from cell "+a.address+" to cell "+b.address):e>g?c="up":g>e?c="down":console.log("Cannot calculate direction going from cell "+a.address+" to cell "+b.address),c},a.prototype.edit=function(a,b){return null==b&&(b=null),null!==b?null!=a?a.cellTypeObject.edit(b):void 0:(a.cellTypeObject.edit(),!1)},a.prototype["delete"]=function(){var a,b,c,d,e;for(d=this.activeCells,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.value(""));return e},a.prototype.clearActiveCells=function(){return a.Utilities.prototype.clearActiveCells(this)},a.prototype.setSelection=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(this.selectionStart&&this.selectionEnd&&this.selectionStart!==this.selectionEnd){for(l=this.activeCells,f=0,h=l.length;h>f;f++)a=l[f],a.showInactive();for(this.activeCells=[],e=function(){o=[];for(var a=m=this.selectionStart.address[0],b=this.selectionEnd.address[0];b>=m?b>=a:a>=b;b>=m?a++:a--)o.push(a);return o}.apply(this),c=function(){p=[];for(var a=n=this.selectionStart.address[1],b=this.selectionEnd.address[1];b>=n?b>=a:a>=b;b>=n?a++:a--)p.push(a);return p}.apply(this),g=0,i=e.length;i>g;g++)for(d=e[g],k=0,j=c.length;j>k;k++)b=c[k],this.rows[d].cells[b].addToSelection()}},a.prototype.data=function(){var a,b,c,d,e,f,g,h,i,j;for(b=[],i=this.rows,e=0,g=i.length;g>e;e++){for(c=i[e],d=[],j=c.cells,f=0,h=j.length;h>f;f++)a=j[f],d.push(a.cellTypeObject.value());b.push(d)}return b},a.prototype.repopulate=function(){var a,b,c,d,e,f;for(e=this.rows,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(){var c,d,e,f;for(e=b.cells,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.value(a.source[a.valueKey]));return f}());return f},a.prototype.destroy=function(){var a,b;this.useFixedHeaders&&this.fixedHeader&&document.body.removeChild(this.fixedHeader.table),this.element.removeChild(this.tableEl),b=[];for(a in this)b.push(delete this[a]);return b},a.prototype.isDescendant=function(a){var b;for(b=a.parentNode;null!=b;){if(b===this.tableEl)return!0;b=b.parentNode}return!1},a.prototype.addToStack=function(a){return this.actionStack.addAction(a)},a.prototype.undo=function(){return this.actionStack.undo()},a.prototype.redo=function(){return this.actionStack.redo()},a.prototype.moveRow=function(b,c,d){var e;return null==d&&(d=!0),e=this.source[b],a.Hook.prototype.run(this,"beforeMoveRow",b,c)?(this.source.splice(b,1),this.source.splice(c,0,e),d&&this.addToStack({type:"move-row",oldIndex:b,newIndex:c}),this.rebuild({rows:this.source,initialize:!0,selectedCell:[c,0]}),this.setDirtyRows(),a.Hook.prototype.run(this,"afterMoveRow",b,c)):void 0},a.prototype.addRow=function(b,c,d){var e,f,g,h,i;if(null==c&&(c=!0),null==d&&(d=!1),a.Hook.prototype.run(this,"beforeAddRow",b,d)){if(d)f=d;else for(f={},i=this.cols,g=0,h=i.length;h>g;g++)e=i[g],f[e.valueKey]=e.defaultValue||"";return b||0===b?this.source.splice(b,0,f):(b=this.source.length-1,this.source.push(f)),c&&this.addToStack({type:"add-row",index:b,rowObject:d}),this.rebuild({rows:this.source,initialize:!0,selectedCell:[b,0]}),this.setDirtyRows(),a.Hook.prototype.run(this,"afterAddRow",b,d)}},a.prototype.addRows=function(b,c,d){var e,f,g,h,i,j,k,l,m,n;if(null==c&&(c=!0),null==d&&(d=[]),a.Hook.prototype.run(this,"beforeAddRows",b,d)){for(f=j=0,l=d.length;l>j;f=++j){if(i=d[f],g=b+f,i)h=i;else for(h={},n=this.cols,k=0,m=n.length;m>k;k++)e=n[k],h[e.valueKey]=e.defaultValue||"";g||0===g?this.source.splice(g,0,h):(g=this.source.length-1,this.source.push(h))}return c&&this.addToStack({type:"add-rows",index:b,rowObjects:d}),this.rebuild({rows:this.source,initialize:!0,selectedCell:[b,0]}),this.setDirtyRows(),a.Hook.prototype.run(this,"afterAddRows",b,d)}},a.prototype.insertBelow=function(){var b;return b=this.contextMenu.getTargetPasteCell(),a.Hook.prototype.run(this,"beforeInsertBelow",b)?(this.addRow(b.address[0]+1),this.setDirtyRows(),a.Hook.prototype.run(this,"afterInsertBelow",b)):void 0},a.prototype.insertAbove=function(){var b;return b=this.contextMenu.getTargetPasteCell(),a.Hook.prototype.run(this,"beforeInsertAbove",b)?(this.addRow(b.address[0]),this.setDirtyRows(),a.Hook.prototype.run(this,"afterInsertAbove",b)):void 0},a.prototype.removeRow=function(b,c){var d,e,f;return null==c&&(c=!0),a.Hook.prototype.run(this,"beforeRemoveRow",b)?(e=this.source[b],d=this.rows[b],f=this.source.splice(b,1),c&&this.addToStack({type:"remove-row",index:b,rowObject:e}),this.rebuild({rows:this.source,initialize:!0,selectedCell:[b,0]}),this.setDirtyRows(),a.Hook.prototype.run(this,"afterRemoveRow",b)):void 0},a.prototype.removeRows=function(b,c,d){var e,f,g,h,i;if(null==c&&(c=!0),a.Hook.prototype.run(this,"beforeRemoveRows",b,d)){for(g=[],e=h=0,i=d-1;i>=0?i>=h:h>=i;e=i>=0?++h:--h)f=this.source[b+e],g.push(f);return this.source.splice(b,d),c&&this.addToStack({type:"remove-rows",index:b,rowObjects:g}),this.rebuild({rows:this.source,initialize:!0,selectedCell:[b,0]}),this.setDirtyRows(),a.Hook.prototype.run(this,"afterRemoveRows",b,d)}},a.prototype.selectRow=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(this.activeCell()&&b){if(f=this.activeCells[0].address[0],i=b.shiftKey,e=b.ctrlKey,d=b.metaKey,e||d||a.Utilities.prototype.clearActiveCells(this),i){if(g=f-c,0>g){for(n=this.rows.slice(f,+c+1||9e9),p=[],j=0,l=n.length;l>j;j++)h=n[j],p.push(h.select());return p}for(o=this.rows.slice(c,+f+1||9e9),q=[],k=0,m=o.length;m>k;k++)h=o[k],q.push(h.select());return q}return h=this.rows[c],h.select()}return h=this.rows[c],h.select()},a.prototype.calculateSubtotals=function(){var a,b,c,d,e;for(d=this.subtotalRows,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.calculate());return e},a.prototype.openCellAndPopulateInitialValue=function(b,c){return this.openCell?void 0:this.activeCell().onKeyPress(a.Utilities.prototype.valueFromKey(c,b))},a.prototype.checkIfCellIsDirty=function(a){var b;if(b=this.dirtyCells.indexOf(a),-1===b){if(a.isDirty())return this.dirtyCells.push(a)}else if(!a.isDirty())return this.dirtyCells.splice(b,1)},a.prototype.setDirtyRows=function(){var a,b,c,d,e;if(!this.config.uniqueValueKey)return!1;this.dirtyRows=[],c=this.uniqueValueKey,d=this.rowIndex,e=[];for(a in d)b=d[a],e.push(b!==this.source[a][c]?this.dirtyRows.push(a):void 0);return e},a.prototype.isDirty=function(){return this.dirtyRows.length>0||this.dirtyCells.length>0},a}(),b="undefined"!=typeof exports&&null!==exports?exports:window,b.GridEdit=a}).call(this),function(){GridEdit.ActionStack=function(){function a(a){this.table=a,this.index=-1,this.actions=[]}return a.prototype.getCell=function(a){return this.table.getCell(a.address[0],a.address[1])},a.prototype.addAction=function(a){return this.actions.length>0&&this.index<this.actions.length-1&&(this.actions=this.actions.splice(0,this.index+1)),this.actions.push(a),this.index++},a.prototype.undo=function(){var a,b;if(this.index>-1)switch(this.index--,a=this.actions[this.index+1],a.type){case"cell-edit":b=this.getCell(a),b.value(a.oldValue,!1);break;case"cut":a.grid.undo(!1,!1);break;case"paste":a.grid.undo(a.x,a.y);break;case"fill":a.grid.undo(!1,!1);break;case"add-row":this.table.removeRow(a.index,!1);break;case"remove-row":this.table.addRow(a.index,!1,a.rowObject);break;case"move-row":this.table.moveRow(a.newIndex,a.oldIndex,!1);break;case"add-rows":this.table.removeRows(a.index,!1,a.rowObjects.length);break;case"remove-rows":this.table.addRows(a.index,!1,a.rowObjects)}},a.prototype.redo=function(){var a,b;if(this.index<this.actions.length-1)switch(this.index++,a=this.actions[this.index],a.type){case"cell-edit":b=this.table.getCell(a.address[0],a.address[1]),b.value(a.newValue,!1);break;case"cut":a.grid.apply(!1,!1);break;case"paste":a.grid.apply(a.x,a.y);break;case"fill":a.grid.apply(!1,!1);break;case"add-row":this.table.addRow(a.index,!1,a.rowObject);break;case"remove-row":this.table.removeRow(a.index,!1);break;case"move-row":this.table.moveRow(a.oldIndex,a.newIndex,!1);break;case"add-rows":this.table.addRows(a.index,!1,a.rowObjects);break;case"remove-rows":this.table.removeRows(a.index,!1,a.rowObjects)}},a}()}.call(this),function(){GridEdit.ContextMenu=function(){function a(a){var b,c,d,e,f,g,h,i;if(this.table=a,this.active=this.table.config.includeContextMenu!==!1,this.userDefinedActions=this.table.config.contextMenuItems,this.userDefinedOrder=this.table.config.contextMenuOrder,d=/Mac/.test(navigator.platform)?"Cmd":"Ctrl",this.actionNodes={},this.actionCallbacks={byName:{},byControl:{}},this.borderedCells=[],this.defaultActions={cut:{name:"Cut",shortCut:d+"+X",callback:this.cut},copy:{name:"Copy",shortCut:d+"+C",callback:this.copy},paste:{name:"Paste",shortCut:d+"+V",callback:this.paste},undo:{name:"Undo",shortCut:d+"+Z",callback:this.undo},redo:{name:"Redo",shortCut:d+"+Y",callback:this.redo},fill:{name:"Fill",shortCut:"",hasDivider:!0,callback:this.fill},selectAll:{name:"Select All",shortCut:d+"+A",callback:this.selectAll},insertBelow:{name:"Insert Row Below",shortCut:"",callback:this.insertBelow},insertAbove:{name:"Insert Row Above",shortCut:"",callback:this.insertAbove},removeRow:{name:"Remove Row",shortCut:"",callback:this.removeRow}},this.element=document.createElement("div"),this.element.style.position="fixed",this.element.style.zIndex="1040",this.menu=document.createElement("ul"),GridEdit.Utilities.prototype.setAttributes(this.menu,{"class":"dropdown-menu",role:"menu","aria-labelledby":"aria-labelledby",style:"display:block;position:static;margin-bottom:5px;"}),this.active)if(this.userDefinedOrder)for(g=this.userDefinedOrder,e=0,f=g.length;f>e;e++)c=g[e],b=this.userDefinedActions?this.userDefinedActions[c]||this.defaultActions[c]:this.defaultActions[c],b&&this.addAction(b);else{h=this.defaultActions;for(c in h)b=h[c],(!this.userDefinedActions||!this.userDefinedActions[c]&&this.userDefinedActions[c]!==!1)&&this.addAction(b);i=this.userDefinedActions;for(c in i)b=i[c],this.addAction(b)}this.element.appendChild(this.menu),this.events(this),GridEdit.Hook.prototype.initContextMenuHooks(this)}return a.prototype.addDivider=function(){var a;return a=document.createElement("li"),GridEdit.Utilities.prototype.setAttributes(a,{"class":"divider"}),this.menu.appendChild(a)},a.prototype.addAction=function(a){var b,c,d,e,f,g,h;return f=document.createElement("li"),f.setAttribute("name",a.name),d=document.createElement("div"),h=document.createElement("span"),h.textContent=a.shortCut,GridEdit.Utilities.prototype.setAttributes(h,{style:"float: right !important;"}),b=document.createElement("a"),b.textContent=a.name,b.setAttribute("name",a.name),GridEdit.Utilities.prototype.setAttributes(b,{"class":"enabled",tabIndex:"-1"}),a.hasDivider&&this.addDivider(),b.appendChild(h),f.appendChild(b),this.actionNodes[a.name]=f,this.actionCallbacks.byName[a.name]=a.callback,g=a.shortCut,g&&/(ctrl|cmd)/i.test(g)&&(e=g.split("+")[1],c=e.charCodeAt(0),this.actionCallbacks.byControl[c]=a.callback),this.menu.appendChild(f)},a.prototype.show=function(a,b,c){var d;return this.cell=c,this.active?(c.isActive()||c.makeActive(),this.cells=c.table.activeCells,GridEdit.Utilities.prototype.setStyles(this.element,{left:a,top:b}),document.body.appendChild(this.element),d=this.element,setTimeout(function(){var a,b,c,e,f,g,h,i,j,k,l,m;return j=d.getBoundingClientRect(),l=GridEdit.Utilities.prototype.getScreenDimensions(),h=l.height>j.height,b=j.bottom>l.height,f=j.top<0,g=l.width>j.width,e=j.right>l.width,c=j.left<0,h?(d.style.overflowY="hidden",d.style.height="auto",b&&(m=j.top-(j.bottom-l.height),d.style.top=m+"px"),f&&(a=j.bottom+Math.abs(j.top),d.style.bottom=a+"px")):(d.style.top=0,d.style.height=l.height+"px",d.style.overflowY="scroll"),g?(d.style.overflowX="hidden",d.style.width="auto",e&&(i=j.left-(j.right-l.width),d.style.left=i+"px"),c?(k=j.right+Math.abs(j.left),d.style.right=k+"px"):void 0):(d.style.left=0,d.style.width=l.width+"px",d.style.overflowX="scroll")},100),!1):void 0},a.prototype.hide=function(){return this.isVisible()?document.body.removeChild(this.element):void 0},a.prototype.isVisible=function(){return null!=this.element.parentNode},a.prototype.getTargetPasteCell=function(){return this.table.activeCells.sort(this.sortFunc)[0]},a.prototype.sortFunc=function(a,b){return a.address[0]-b.address[0]},a.prototype.displayBorders=function(){return this.table.copiedGridChange?this.table.copiedGridChange.displayBorders():void 0},a.prototype.hideBorders=function(){return this.table.copiedGridChange?this.table.copiedGridChange.removeBorders():void 0},a.prototype.cut=function(a,b){var c,d;return d=b.contextMenu,d.hideBorders(),c=new GridEdit.GridChange(b.activeCells,"ge-blank"),c.apply(!1,!1),b.copiedGridChange=c,b.addToStack({type:"cut",grid:c}),d.displayBorders(),d.hide()},a.prototype.copy=function(a,b){var c;return c=b.contextMenu,b.copiedGridChange=new GridEdit.GridChange(b.activeCells),c.displayBorders(),c.hide()},a.prototype.paste=function(a,b){var c,d,e,f,g;return e=b.contextMenu,e.hide(),c=e.getTargetPasteCell(),c.editable?(d=b.copiedGridChange,f=c.address[0],g=c.address[1],d.apply(f,g),b.addToStack({type:"paste",grid:d,x:f,y:g})):void 0},a.prototype.fill=function(a,b){var c,d,e,f;return f=b.contextMenu,c=f.getTargetPasteCell(),d=c.value(),e=new GridEdit.GridChange(b.activeCells,d),e.apply(!1,!1),b.addToStack({type:"fill",grid:e}),f.hide()},a.prototype.selectAll=function(a,b){var c,d,e,f,g,h;for(b.clearActiveCells(),g=b.rows,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(function(){var a,b,e,f;for(e=d.cells,f=[],a=0,b=e.length;b>a;a++)c=e[a],f.push(c.addToSelection());return f}());return h},a.prototype.insertBelow=function(a,b){return b.insertBelow()},a.prototype.insertAbove=function(a,b){return b.insertAbove()},a.prototype.removeRow=function(a,b){var c;return c=b.contextMenu.getTargetPasteCell(),b.removeRow(c.row.index)},a.prototype.undo=function(a,b){return b.undo()},a.prototype.redo=function(a,b){return b.redo()},a.prototype.toggle=function(a){var b;return b=this.actionNodes[a].classList,b.toggle("enabled"),b.toggle("disabled")},a.prototype.execute=function(a,b){return GridEdit.Hook.prototype.run(this,"beforeContextMenuAction",b,this.table)?(a(b,this.table),GridEdit.Hook.prototype.run(this,"afterContextMenuAction",b,this.table)):void 0},a.prototype.events=function(a){return this.element.onclick=function(b){var c;return c=b.target.getAttribute("name"),a.execute(a.actionCallbacks.byName[c],b)}},a}()}.call(this),function(){GridEdit.Utilities=function(){function a(){}return a.prototype.setAttributes=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(d?a.setAttribute(c,d):void 0);return e},a.prototype.setStyles=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(a.style[c]=""+d+"px");return e},a.prototype.clearActiveCells=function(a){var b,c,d,e,f,g,h,i,j;if(f=a.redCells,c=a.activeCells,f.length>0){for(d=g=0,i=f.length;i>g;d=++g)e=f[d],null!=e&&e.makeInactive();a.redCells=[]}if(c.length>0){for(d=h=0,j=c.length;j>h;d=++h)b=c[d],null!=b&&b.makeInactive(),null!=b&&b.hideControl();a.activeCells=[]}return a.selectionStart=null,a.selectionEnd=null,a.contextMenu.hide(),a.selectedCol?a.selectedCol.makeInactive():void 0},a.prototype.capitalize=function(a){return a.toLowerCase().replace(/\b./g,function(a){return a.toUpperCase()})},a.prototype.valueFromKey=function(a,b){var c;return c=String.fromCharCode(a),b?c:c.toLowerCase()},a.prototype.getScreenDimensions=function(){var a,b,c,d,e,f;return d=window,a=document,b=a.documentElement,c=a.getElementsByTagName("body")[0],e=d.innerWidth||b.clientWidth||c.clientWidth,f=d.innerHeight||b.clientHeight||c.clientHeight,{width:e,height:f}},a.prototype.repositionFixedHeader=function(a){var b,c,d,e,f,g;return f=a.fixedHeader,f&&(e=f.table)?(d=document.documentElement,g=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),b=a.thead,c=b.getBoundingClientRect(),e.style.left=c.left+g+"px"):void 0},a.prototype.fixHeaders=function(a){return clearTimeout(this.fixHeadersBuffer),this.fixHeadersBuffer=setTimeout(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(q=a.config.includeRowHandles?1:0,c=a.thead,g=c.getElementsByTagName("th"),a.fixedHeader?(u=a.fixedHeader.table,a.fixedHeader.table.parentNode.removeChild(u),b=a.fixedHeader.backgroundColor):(b=window.getComputedStyle(c).backgroundColor,("rgba(0, 0, 0, 0)"===b||"transparent"===b)&&(b="white")),h=document.documentElement,s=(window.pageXOffset||h.scrollLeft)-(h.clientLeft||0),t=(window.pageYOffset||h.scrollTop)-(h.clientTop||0),m=a.element,n=m.scrollLeft||0,o=m.scrollTop||0,d=c.getBoundingClientRect(),l=document.createElement("table"),l.className=a.tableEl.className,l.style.position="absolute",l.style.top=d.top+t+o+"px",l.style.left=d.left+s+n+"px",l.style.width=d.width+"px",l.style.zIndex=1039,j=document.createElement("thead"),j.className=c.className,j.ondragenter=c.ondragenter,j.ondragleave=c.ondragleave,k=document.createElement("tr"),r=0,p=v=0,w=g.length;w>v;p=++v)e=g[p],f=e.getBoundingClientRect(),i=document.createElement("th"),i.innerHTML=e.innerHTML,i.className=e.className,i.style.position="absolute",i.style.minWidth=f.width+"px",i.style.maxWidth=f.width+"px",i.style.minHeight=f.height+"px",i.style.left=r+"px",i.style.backgroundColor=b,i.setAttribute("col-id",p-q),i.onclick=function(){var b,c;return c=this.getAttribute("col-id"),b=a.cols[c],GridEdit.Utilities.prototype.clearActiveCells(a),setTimeout(function(){var a,c,d,e,f;for(b.makeActive(),e=b.cells,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.addToSelection());return f},0)},r+=f.width,k.appendChild(i);return j.appendChild(k),l.appendChild(j),document.body.appendChild(l),a.fixedHeader={table:l,backgroundColor:b}},100)},a}()}.call(this),function(){GridEdit.Column=function(){function a(a,b){var c,d,e,f;this.attributes=a,this.table=b,this.id=this.index=this.table.cols.length,this.defaultValue=this.attributes.defaultValue,this.cellClass=this.attributes.cellClass,this.cells=[],this.element=document.createElement("th"),this.textNode=document.createTextNode(this.attributes.label),this.element.appendChild(this.textNode),c=this.attributes.format,this.format=function(a){return c?c(a):a},f=this.attributes;for(d in f)e=f[d],this[d]=e;delete this.attributes,this.events()}return a.prototype.next=function(){return this.table.cols[this.index+1]},a.prototype.previous=function(){return this.table.cols[this.index-1]},a.prototype.makeActive=function(){return this.element.classList.add("active"),this.table.selectedCol=this},a.prototype.makeInactive=function(){return this.element.classList.remove("active"),this.table.selectedCol=null},a.prototype.events=function(){var a,b;return a=this,b=a.table,this.element.onclick=function(){var c,d,e,f,g;for(GridEdit.Utilities.prototype.clearActiveCells(b),a.makeActive(),f=a.cells,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.addToSelection());return g},this.element.onmousedown=function(c){return 3===c.which?void b.contextMenu.show(c.x,c.y,a.cells[0]):!1}},a}()}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};GridEdit.Row=function(){function a(a,b){var c;this.attributes=a,this.table=b,this.id=this.table.rows.length,this.cells=[],this.index=this.table.rows.length,this.element=document.createElement("tr"),this.cssClass=this.attributes.cssClass,this.cssClass&&(this.element.className=this.cssClass),this.oldBorderBottom=this.element.style.borderBottom,this.oldBorderTop=this.element.style.borderTop,this.type=this.attributes.gridEditRowType,this.alwaysPristine=!1,b=this.table,c=this,this.element.ondragenter=function(){var a;return b.lastDragOverIsBeforeFirstRow=!1,a=b.lastDragOver,a?0!==c.index&&a.index===c.index||(a.element.style.borderBottom=c.oldBorderBottom,c.element.style.borderBottom=b.theme.borders.dragBorderStyle):c.element.style.borderBottom=b.theme.borders.dragBorderStyle,b.lastDragOver=c},this.includeRowHandles=this.table.config.includeRowHandles,GridEdit.Utilities.prototype.setAttributes(this.element,{id:"row-"+this.id})}return a.prototype.createCell=function(a){var b,c,d,e;switch(d=this.cells.length,c=this.table.cols[d],e=c.type){case"string":b=new GridEdit.StringCell(a,this);break;case"number":b=new GridEdit.NumberCell(a,this);break;case"date":b=new GridEdit.DateCell(a,this);break;case"html":b=new GridEdit.HTMLCell(a,this);break;case"select":b=new GridEdit.SelectCell(a,this);break;case"textarea":b=new GridEdit.TextAreaCell(a,this);break;case"checkbox":b=new GridEdit.CheckBoxCell(a,this);break;default:b=new GridEdit.GenericCell(a,this)}return b},a.prototype.below=function(){return this.table.rows[this.index+1]},a.prototype.above=function(){return this.table.rows[this.index-1]},a.prototype.select=function(){var a,b,c,d,e;for(d=this.cells,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.addToSelection());return e},a.prototype.afterEdit=function(){return this.table.calculateSubtotals()},a.prototype.addHandle=function(){var a;return this.includeRowHandles?(a=new GridEdit.HandleCell(this),this.element.appendChild(a.element)):void 0},a}(),GridEdit.GenericRow=function(a){function c(a,b){var d,e,f,g,h,i;for(this.attributes=a,this.table=b,c.__super__.constructor.apply(this,arguments),this.editable=!0,this.addHandle(),i=this.table.cols,f=g=0,h=i.length;h>g;f=++g)e=i[f],d=this.createCell(this.attributes[e.valueKey]),this.cells.push(d),this.table.cols[f].cells.push(d),this.element.appendChild(d.element);delete this.attributes}return b(c,a),c}(GridEdit.Row),GridEdit.StaticRow=function(a){function c(a,b){this.attributes=a,this.table=b,c.__super__.constructor.apply(this,arguments),this.addHandle(),this.editable=this.attributes.editable=!1,this.element.innerHTML=this.attributes.html,this.type="static",delete this.attributes}return b(c,a),c}(GridEdit.Row),GridEdit.SubTotalRow=function(a){function c(a,b){var d,e,f,g,h,i,j;for(this.attributes=a,this.table=b,c.__super__.constructor.apply(this,arguments),this.subtotalColumns={},this.labels=this.attributes.labels,this.running=this.attributes.running,this.alwaysPristine=!0,this.addHandle(),j=this.table.cols,f=h=0,i=j.length;i>h;f=++h)e=j[f],d=new GridEdit.GenericCell("",this),d.editable=!1,this.labels&&(g=this.labels[e.valueKey],d.element.innerHTML=g||""),this.cells.push(d),this.table.cols[f].cells.push(d),this.element.appendChild(d.element),this.attributes.subtotal[e.valueKey]&&(this.subtotalColumns[e.valueKey]=f);this.table.subtotalRows.push(this),this.calculate()}return b(c,a),c.prototype.calculate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(f=-1,!this.running)for(m=this.table.subtotalRows,i=0,k=m.length;k>i;i++)g=m[i],e=g.index,e<this.index&&e>f&&(f=e);n=this.subtotalColumns,p=[];for(b in n){for(c=n[b],h=0,o=this.table.rows,j=0,l=o.length;l>j;j++)if(d=o[j],d.index>f){if(d.index===this.index)break;"subtotal"!==d.type&&"header"!==d.type&&(a=d.cells[c],a&&(h+=Number(a.value())))}p.push(this.cells[c].value(h,!1))}return p},c.prototype.afterEdit=function(){},c}(GridEdit.Row),GridEdit.HeaderRow=function(a){function c(a,b){var d,e,f,g,h,i;for(this.attributes=a,this.table=b,c.__super__.constructor.apply(this,arguments),this.editable=!0,this.addHandle(),i=this.table.cols,f=g=0,h=i.length;h>g;f=++g)e=i[f],d=new GridEdit.HTMLCell(this.attributes[e.valueKey],this),d.editable=!0,this.cells.push(d),this.table.cols[f].cells.push(d),this.element.appendChild(d.element);delete this.attributes}return b(c,a),c}(GridEdit.Row)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};GridEdit.Cell=function(){function a(a,b){this.originalValue=a,this.row=b,this.index=this.row.cells.length,this.id=""+this.row.id+"-"+this.index,this.address=[this.row.id,this.index],this.table=this.row.table,this.col=this.table.cols[this.index],this.meta=this.col,this.element=document.createElement("td")}return a.prototype.initialize=function(){return this.initEditable(),this.initValueKey(),this.initSource(),this.initOriginalValue(),this.initSourceValue(),this.initNode(),this.initControl(),this.applyControlBehavior(),this.applyEventBehavior(),GridEdit.Hook.prototype.initCellHooks(this),this.applyStyle()},a.prototype.initOriginalValue=function(){return void 0===this.originalValue?this.originalValue="":void 0},a.prototype.initSourceValue=function(){return this.source[this.valueKey]=this.originalValue},a.prototype.initEditable=function(){return this.editable=this.col.editable!==!1},a.prototype.initValueKey=function(){return this.valueKey=this.col.valueKey},a.prototype.initSource=function(){return this.source=this.table.config.rows[this.address[0]]},a.prototype.initNode=function(){return this.element.appendChild(document.createTextNode(this.col.format(this.originalValue)))},a.prototype.initControl=function(){return this.control=document.createElement("input")
},a.prototype.showRed=function(){return this.showUneditable()},a.prototype.applyStyle=function(){var a,b;if(this.col.cellClass&&this.element.classList.add(this.col.cellClass),this.col.style){b=[];for(a in this.col.style)b.push(this.element.style[a]=this.col.style[a]);return b}},a.prototype.addToSelection=function(){return this.showActive(),this.table.activeCells.push(this)},a.prototype.removeFromSelection=function(){var a;return a=this.table.activeCells.indexOf(this),this.table.activeCells.splice(a,1),this.showInactive()},a.prototype.isActive=function(){return-1!==this.table.activeCells.indexOf(this)},a.prototype.makeActive=function(a){var b;return null==a&&(a=!0),this.table.hideControl(),a&&GridEdit.Utilities.prototype.clearActiveCells(this.table),!this.isActive()&&GridEdit.Hook.prototype.run(this,"beforeActivate",this)?(this.showActive(),this.table.activeCells.push(this),this.table.selectionStart=this,b=this.table.openCell,b&&b.edit(b.control.value),GridEdit.Hook.prototype.run(this,"afterActivate",this)):void 0},a.prototype.makeInactive=function(){return this.showInactive()},a.prototype.showActive=function(){return this.isActive()?void 0:(this.oldBackgroundColor=this.element.style.backgroundColor,this.element.style.backgroundColor=this.table.theme.cells.activeColor)},a.prototype.showInactive=function(){return this.element.style.backgroundColor=this.oldBackgroundColor},a.prototype.showUneditable=function(){return this.element.style.backgroundColor=this.table.theme.cells.uneditableColor,this.table.redCells.push(this)},a.prototype.edit=function(a){return null==a&&(a=null),this.editable?null===a?this.showControl():(this.value(a),this.isBeingEdited()?this.hideControl():void 0):this.showUneditable()},a.prototype.value=function(a,b){var c,d;return null==a&&(a=null),null==b&&(b=!0),c=this.source[this.valueKey],null!==a&&a!==c?(a=this.formatValue(a),d=this.value(),GridEdit.Hook.prototype.run(this,"beforeEdit",this,d,a)?(b&&this.table.addToStack({type:"cell-edit",oldValue:d,newValue:a,address:this.address}),this.setValue(a),this.renderValue(a),this.row.afterEdit(),this.table.useFixedHeaders&&GridEdit.Utilities.prototype.fixHeaders(this.table),GridEdit.Hook.prototype.run(this,"afterEdit",this,d,a,this.table.contextMenu.getTargetPasteCell()),this.table.checkIfCellIsDirty(this),a):c):c},a.prototype.formatValue=function(a){return a},a.prototype.setValue=function(a){return this.source[this.valueKey]=a},a.prototype.renderValue=function(a){return this.element.textContent=this.col.format(a)},a.prototype.select=function(){return this.control.select()},a.prototype.isDirty=function(){return this.row.alwaysPristine?!1:this.originalValue!==this.value()},a.prototype.showControl=function(a){return null==a&&(a=null),this.editable?GridEdit.Hook.prototype.run(this,"beforeControlInit",this)?(this.table.contextMenu.hideBorders(),this.renderControl(),this.setControlValue(a),this.table.openCell=this,GridEdit.Hook.prototype.run(this,"afterControlInit",this)):void 0:this.showUneditable()},a.prototype.setControlValue=function(a){return this.control.value=a},a.prototype.renderControl=function(){var a;return GridEdit.Utilities.prototype.setStyles(this.control,this.position()),this.table.element.appendChild(this.control),this.control.style.position="fixed",a=this.control,setTimeout(function(){return a.focus()},0)},a.prototype.hideControl=function(){return GridEdit.Hook.prototype.run(this,"beforeControlHide",this)?(this.isBeingEdited()&&this.control.parentNode.removeChild(this.control),this.table.openCell=null,GridEdit.Hook.prototype.run(this,"afterControlHide",this)):void 0},a.prototype.applyControlBehavior=function(){var a,b;return a=this,b=this.table,this.control.onkeydown=function(c){var d;switch(d=c.which){case 13:return a.edit(this.value);case 9:return a.edit(this.value),moveTo(b.nextCell())}}},a.prototype.position=function(){return this.element.getBoundingClientRect()},a.prototype.reposition=function(){return GridEdit.Utilities.prototype.setStyles(this.control,this.position())},a.prototype.next=function(){var a;return this.row.cells[this.index+1]||(null!=(a=this.row.below())?a.cells[0]:void 0)},a.prototype.previous=function(){var a;return this.row.cells[this.index-1]||(null!=(a=this.row.above())?a.cells[this.row.cells.length-1]:void 0)},a.prototype.above=function(){var a;return null!=(a=this.row.above())?a.cells[this.index]:void 0},a.prototype.below=function(){var a;return null!=(a=this.row.below())?a.cells[this.index]:void 0},a.prototype.isBefore=function(a){return a.address[0]===this.address[0]&&a.address[1]>this.address[1]},a.prototype.isAfter=function(a){return a.address[0]===this.address[0]&&a.address[1]<this.address[1]},a.prototype.isAbove=function(a){return a.address[0]>this.address[0]&&a.address[1]===this.address[1]},a.prototype.isBelow=function(a){return a.address[0]<this.address[0]&&a.address[1]===this.address[1]},a.prototype.addClass=function(a){return this.element.classList.add(a)},a.prototype.removeClass=function(a){return this.element.classList.remove(a)},a.prototype.isBeingEdited=function(){return this.control?null!=this.control.parentNode:!1},a.prototype.toggleActive=function(){return this.isActive()?this.removeFromSelection():this.makeActive(!1)},a.prototype.isVisible=function(){var a;return a=this.position(),a.top>=this.table.topOffset&&a.bottom<=window.innerHeight},a.prototype.onReturnKeyPress=function(){return this.table.moveTo(this.table.belowCell())},a.prototype.onSpaceKeyPress=function(){return this.edit()},a.prototype.onKeyPress=function(a){return this.showControl(a)},a.prototype.applyEventBehavior=function(){var a,b,c,d;return a=this,d=this.table,b=null,this.element.onclick=function(c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(d.contextMenu.hideBorders(),d.lastClickCell===a)GridEdit.Hook.prototype.run(a,"onDblClick",a,c)&&(d.lastClickCell=null,a.showControl(a.value()));else if(d.lastClickCell=a,clearInterval(b),b=setTimeout(function(){return d.lastClickCell=null},1e3),GridEdit.Hook.prototype.run(a,"onClick",a,c)){if(n=c.ctrlKey,l=c.metaKey,p=c.shiftKey,e=function(){},j>=h)for(m=q=h;j>=h?j>=q:q>=j;m=j>=h?++q:--q)f=d.getCell(o,m),f.makeActive(!1);else for(m=r=j;h>=j?h>=r:r>=h;m=h>=j?++r:--r)f=d.getCell(o,m),f.makeActive(!1);if((n||l)&&a.toggleActive(),p)if(g=d.activeCells[0],i=g.address[0],h=g.address[1],k=a.address[0],j=a.address[1],k>=i)for(o=s=i;k>=i?k>=s:s>=k;o=k>=i?++s:--s)e(o);else for(o=t=k;i>=k?i>=t:t>=i;o=i>=k?++t:--t)e(o)}return!1},this.element.onmousedown=function(b){return 3===b.which?void d.contextMenu.show(b.x,b.y,a):(b.shiftKey||b.ctrlKey||b.metaKey||(d.state="selecting",a.makeActive()),!1)},this.element.onmouseover=function(){return"selecting"===d.state?(d.selectionEnd=a,d.setSelection()):void 0},this.element.onmouseup=function(b){return 3===b.which||(d.selectionEnd=a,d.state="ready",b.metaKey||b.ctrlKey)?void 0:d.setSelection()},d.mobile?(c=null,this.element.ontouchstart=function(a){return c=a.changedTouches[0].clientY,GridEdit.Utilities.prototype.clearActiveCells(d),d.openCell?d.openCell.hideControl():void 0},this.element.ontouchend=function(b){var d;return d=b.changedTouches[0].clientY,b.changedTouches.length<2&&d===c?(b.preventDefault(),a.edit()):void 0}):void 0},a}(),GridEdit.StringCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="string",this.initialize()}return b(c,a),c}(GridEdit.Cell),GridEdit.NumberCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="number",this.initialize()}return b(c,a),c.prototype.normalizeValue=function(a){var b;return null===a||void 0===a||""===a?null:(b=Number(a),isNaN(b)?null:b)},c.prototype.formatValue=function(a){return this.normalizeValue(a)},c.prototype.setValue=function(a){return this.source[this.valueKey]=this.normalizeValue(a)},c}(GridEdit.Cell),GridEdit.CheckBoxCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="checkbox",this.initialize()}return b(c,a),c.prototype.initialize=function(){return this.initEditable(),this.initValueKey(),this.initSource(),this.initOriginalValue(),this.initSourceValue(),this.applyEventBehavior(),GridEdit.Hook.prototype.initCellHooks(this),this.applyStyle(),this.initNode(),this.toggleable=this.editable,this.editable=!1,this.renderValue()},c.prototype.initNode=function(){var a;return a=document.createElement("div"),a.style.width="1em",a.style.margin="auto",this.span=document.createElement("span"),a.appendChild(this.span),this.element.appendChild(a)},c.prototype.edit=function(){return!1},c.prototype.initControl=function(){return this.toggle()},c.prototype.renderControl=function(){return GridEdit.Utilities.prototype.clearActiveCells(this.table)},c.prototype.isBeingEdited=function(){return!1},c.prototype.toggle=function(){return this.toggleable?(this.value(!this.value()),this.setValue(this.value())):this.showUneditable()},c.prototype.renderValue=function(){var a;return a=this.toggleable?"":"disabled",this.value()?this.table.theme.inputs.checkbox.checkedClassName?this.span.className=this.table.theme.inputs.checkbox.checkedClassName:this.span.innerHTML="<input type='checkbox' "+a+" checked />":this.table.theme.inputs.checkbox.uncheckedClassName?this.span.className=this.table.theme.inputs.checkbox.uncheckedClassName:this.span.innerHTML="<input type='checkbox' "+a+" />"},c.prototype.applyEventBehavior=function(){var a;return c.__super__.applyEventBehavior.apply(this,arguments),a=this,this.element.onclick=function(){return a.table.contextMenu.hideBorders(),a.toggle()}},c.prototype.onSpaceKeyPress=function(){return this.toggle()},c}(GridEdit.Cell),GridEdit.DateCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="date",this.initialize()}return b(c,a),c.prototype.initNode=function(){return this.element.appendChild(document.createTextNode(this.toDateString(this.originalValue)))},c.prototype.initControl=function(){var a;this.control=this.toDate();try{if(this.originalValue)return this.control.valueAsDate=new Date(this.originalValue)}catch(b){a=b}},c.prototype.formatValue=function(a){var b;if(a.length>0)return this.toDateString(Date.parse(a));if(a instanceof Date)return this.toDateString(a);if(0===a.length){try{this.control.valueAsDate=null}catch(c){b=c}return""}},c.prototype.setValue=function(a){return this.source[this.valueKey]=new Date(a),this.setControlValue()},c.prototype.setControlValue=function(){var a;try{return this.control.valueAsDate=this.source[this.valueKey]}catch(b){a=b}},c.prototype.renderValue=function(){return this.element.textContent=this.col.format(this.toDateString(this.value()))},c.prototype.toDateString=function(a){var b;return null==a&&(a=null),b=a&&""!==a?new Date(a):this.value()?new Date(this.value()):null,b instanceof Date?isNaN(b.getTime())?"":("0"+(b.getUTCMonth()+1)).slice(-2)+"-"+("0"+b.getUTCDate()).slice(-2)+"-"+b.getUTCFullYear():""},c.prototype.toDate=function(){var a;return a=document.createElement("input"),a.type="date",a.value=this.toDateString(),a},c.prototype.toDateInputString=function(a){var b;return null==a&&(a=null),a&&""!==a?b=new Date(a):this.value()&&(b=new Date(this.value())),b instanceof Date?b.getUTCFullYear()+"-"+("0"+(b.getUTCMonth()+1)).slice(-2)+"-"+("0"+b.getUTCDate()).slice(-2):""},c}(GridEdit.Cell),GridEdit.HTMLCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="html",this.initialize()}return b(c,a),c.prototype.initNode=function(){return this.htmlContent=this.col.defaultValue||this.originalValue||"",this.element.appendChild(this.toFragment())},c.prototype.setValue=function(a){var b;return this.htmlContent=a,b=this.toFragment(),this.element.innerHTML="",this.element.appendChild(b)},c.prototype.toFragment=function(){var a,b;return a=document.createElement("div"),b=document.createDocumentFragment(),a.innerHTML=this.htmlContent,b.appendChild(a.firstChild||document.createTextNode("")),b},c.prototype.renderValue=function(){return this.htmlContent},c}(GridEdit.Cell),GridEdit.SelectCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="select",this.initialize()}return b(c,a),c.prototype.initNode=function(){var a;return a=document.createTextNode(this.originalValue),this.element.appendChild(a)},c.prototype.initControl=function(){var a,b,c,d,e,f,g,h,i,j,k;for(a=this,e=document.createElement("select"),this.meta.choices||console.log("There is not a 'choices' key in cell "+this.address+" and you specified that it was of type 'select'"),k=this.meta.choices,g=0,i=k.length;i>g;g++){if(b=k[g],d=document.createElement("option"),b instanceof Array)for(c=h=0,j=b.length;j>h;c=++h)f=b[c],0===c&&(d.value=f),1===c&&(d.text=f);else d.value=d.text=b;a.value()===b&&(d.selected=!0),e.add(d)}return e.classList.add(this.table.theme.inputs.select.className),e.onchange=function(b){return a.edit(b.target.value)},this.control=e},c.prototype.select=function(){return!1},c.prototype.onSpaceKeyPress=function(){var a;return this.renderControl(),a=this.control,setTimeout(function(){var b;return b=document.createEvent("MouseEvents"),b.initMouseEvent("mousedown",!0,!0,window),a.dispatchEvent(b)},0)},c.prototype.onKeyPress=function(a){var b,c,d,e,f,g,h,i;for(this.onSpaceKeyPress(),e=new RegExp("^"+a,"i"),b=this.control,h=b.options,i=[],c=f=0,g=h.length;g>f;c=++f){if(d=h[c],e.test(d.value)){b.selectedIndex=c;break}i.push(void 0)}return i},c}(GridEdit.Cell),GridEdit.TextAreaCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="textarea",this.initialize()}return b(c,a),c.prototype.initNode=function(){var a;return a=document.createTextNode(this.originalValue||""),this.element.appendChild(a)},c.prototype.initControl=function(){var a,b;return a=this,b=document.createElement("textarea"),b.classList.add(this.table.theme.inputs.textarea.className),this.control=b},c}(GridEdit.Cell),GridEdit.GenericCell=function(a){function c(a,b){this.row=b,c.__super__.constructor.apply(this,arguments),this.type="generic",this.initialize()}return b(c,a),c}(GridEdit.Cell),GridEdit.HandleCell=function(){function a(a){var b,c;this.row=a,a=this.row,c=a.table,this.element=document.createElement("td"),this.element.setAttribute("draggable",!0),this.element.className=c.theme.cells.handleClassName,b=document.createElement("div"),b.innerHTML="<span></span><span></span><span></span>",this.element.appendChild(b),this.element.onclick=function(b){var c;return c=a.index,a.table.selectRow(b,c)},this.element.ondragstart=function(){return GridEdit.Utilities.prototype.clearActiveCells(c),c.contextMenu.hideBorders(),a.select(),c.draggingRow=a},this.element.ondragend=function(){var a,b,d,e;return e=c.draggingRow.index,b=c.lastDragOver.index,d=0,0===b?c.lastDragOverIsBeforeFirstRow||0===e||d++:e>b&&d++,a=b+d,c.lastDragOver.element.style.borderBottom=c.lastDragOver.oldBorderBottom,c.lastDragOver.element.style.borderTop=c.lastDragOver.oldBorderTop,c.lastDragOver.element.style.borderTop=c.lastDragOver.oldBorderTop,c.lastDragOver=null,a!==e?c.moveRow(e,a):void 0}}return a}()}.call(this),function(){GridEdit.GridChange=function(){function a(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(this.cells=a,j="ge-blank"===b,this.changes=[],this.table=this.cells[0].col.table,this.borderStyle=this.table.theme.cells.selectionBorderStyle,this.highRow=0,this.highCol=0,l=0,n=a.length;n>l;l++)d=a[l],h=d.address[0],f=d.address[1],i={row:h,col:f,value:j?"":b||d.value()},this.firstCell?i.row<this.firstCell.row?this.firstCell=i:i.row===this.firstCell.row&&i.col<this.firstCell.col&&(this.firstCell=i):(this.firstCell=i,this.lowRow=i.row,this.lowCol=i.col),i.row>this.highRow&&(this.highRow=i.row),i.col>this.highCol&&(this.highCol=i.col),i.row<this.lowRow&&(this.lowRow=i.row),i.col<this.lowCol&&(this.lowCol=i.col),this.changes.push(i);for(p=this.changes,m=0,o=p.length;o>m;m++)e=p[m],e.rowVector=e.row-this.firstCell.row,e.colVector=e.col-this.firstCell.col;k=this.highCol-this.lowCol+1,g=this.highRow-this.lowRow+1,c=k*g,this.scattered=this.cells.length!==c}return a.prototype.apply=function(a,b){var c,d,e,f,g,h;for((a===!1||b===!1)&&(a=this.firstCell.row,b=this.firstCell.col),g=this.changes,h=[],e=0,f=g.length;f>e;e++)d=g[e],c=this.table.getCell(a+d.rowVector,b+d.colVector),c&&c.editable?(d.oldValue=c.value(),h.push(c.value(d.value,!1))):h.push(d.oldValue="");return h},a.prototype.undo=function(a,b){var c,d,e,f,g,h;for((a===!1||b===!1)&&(a=this.firstCell.row,b=this.firstCell.col),g=this.changes,h=[],e=0,f=g.length;f>e;e++)d=g[e],c=this.table.getCell(a+d.rowVector,b+d.colVector),h.push(c&&c.editable?c.value(d.oldValue,!1):void 0);return h},a.prototype.displayBorders=function(){var a,b,c,d,e;for(d=this.cells,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.addBorder(a));return e},a.prototype.removeBorders=function(){var a,b,c,d,e;for(d=this.cells,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.element.style.border="");return e},a.prototype.addBorder=function(a){var b,c;return c=a.address[0],b=a.address[1],this.scattered?a.element.style.border=this.borderStyle:(this.firstCell.row===this.highRow?(a.element.style.borderTop=this.borderStyle,a.element.style.borderBottom=this.borderStyle):c===this.lowRow?a.element.style.borderTop=this.borderStyle:c===this.highRow&&(a.element.style.borderBottom=this.borderStyle),this.firstCell.col===this.highCol?(a.element.style.borderRight=this.borderStyle,a.element.style.borderLeft=this.borderStyle):b===this.lowCol?a.element.style.borderLeft=this.borderStyle:b===this.highCol?a.element.style.borderRight=this.borderStyle:void 0)},a}()}.call(this),function(){GridEdit.Theme=function(){function a(a,b){switch(this.themeName=a,this.themeName){case"bootstrap":this.apply(this.bootstrap);break;default:this.themeName="default",this.apply(this["default"])}b&&(this.themeName=""+this.themeName+"-custom",this.apply(b))}return a.prototype.apply=function(a){var b,c,d,e,f;d=this,b=function(a,c){var d,e,f;f=[];for(d in c)e=c[d],"object"==typeof e?(a[d]||(a[d]={}),f.push(b(a[d],e))):f.push(a[d]=e);return f},f=[];for(c in a)e=a[c],"object"==typeof e?(d[c]||(d[c]={}),f.push(b(d[c],e))):f.push(d[c]=e);return f},a.prototype["default"]={bootstrap:!1,cells:{activeColor:"#FFE16F",uneditableColor:"#FFBBB3",handleClassName:"handle",selectionBorderStyle:"2px dashed blue"},borders:{dragBorderStyle:"3px solid rgb(160, 195, 240)"},inputs:{textarea:{className:"grid-edit"},select:{className:"grid-edit"},checkbox:{checkedClassName:!1,uncheckedClassName:!1}}},a.prototype.bootstrap={bootstrap:!0,cells:{activeColor:"#FFE16F",uneditableColor:"#FFBBB3",handleClassName:"handle",selectionBorderStyle:"2px dashed blue"},borders:{dragBorderStyle:"3px solid rgb(160, 195, 240)"},inputs:{textarea:{className:"form-control"},select:{className:"form-control"},checkbox:{checkedClassName:"glyphicon glyphicon-check",uncheckedClassName:"glyphicon glyphicon-unchecked"}}},a}()}.call(this),function(){GridEdit.Hook=function(){function a(){}return a.prototype.run=function(a,b){var c,d,e,f,g;if(a[b]){for(d=[],e=f=0,g=arguments.length;g>f;e=++f)c=arguments[e],2>e||d.push(c);return a[b].apply(a,d)!==!1}return!0},a.prototype.initTableHooks=function(a){var b;return b=a.config,a.beforeMoveRow=b.beforeMoveRow,a.afterMoveRow=b.afterMoveRow,a.beforeAddRow=b.beforeAddRow,a.afterAddRow=b.afterAddRow,a.beforeAddRows=b.beforeAddRows,a.afterAddRows=b.afterAddRows,a.beforeRemoveRow=b.beforeRemoveRow,a.afterRemoveRow=b.afterRemoveRow,a.beforeRemoveRows=b.beforeRemoveRows,a.afterRemoveRows=b.afterRemoveRows,a.beforeInsertBelow=b.beforeInsertBelow,a.afterInsertBelow=b.afterInsertBelow,a.beforeInsertAbove=b.beforeInsertAbove,a.afterInsertAbove=b.afterInsertAbove},a.prototype.initContextMenuHooks=function(a){var b;return b=a.table.config,a.beforeContextMenuAction=b.beforeContextMenuAction,a.afterContextMenuAction=b.afterContextMenuAction},a.prototype.initCellHooks=function(a){var b;return b=a.table.config,a.beforeEdit=b.beforeEdit,a.afterEdit=b.afterEdit,a.beforeActivate=b.beforeCellActivate,a.afterActivate=b.afterCellActivate,a.beforeControlInit=b.beforeControlInit,a.afterControlInit=b.afterControlInit,a.beforeControlHide=b.beforeControlHide,a.afterControlHide=b.afterControlHide,a.beforeNavigateTo=b.beforeCellNavigateTo,a.onClick=b.onCellClick,a.onDblClick=b.onCellDblClick},a}()}.call(this);