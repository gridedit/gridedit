(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},o={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=function(){function a(){}return a.prototype.setAttributes=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(d?a.setAttribute(c,d):void 0);return e},a.prototype.setStyles=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(a.style[c]=""+d+"px");return e},a.prototype.clearActiveCells=function(a){var b,c,d,e,f,g,h,i,j;if(f=a.redCells,c=a.activeCells,f.length>0){for(d=g=0,i=f.length;i>g;d=++g)e=f[d],null!=e&&e.makeInactive();a.redCells=[]}if(c.length>0){for(d=h=0,j=c.length;j>h;d=++h)b=c[d],null!=b&&b.makeInactive(),null!=b&&b.hideControl();a.activeCells=[]}return a.selectionStart=null,a.selectionEnd=null,a.contextMenu.hide(),a.selectedCol?a.selectedCol.makeInactive():void 0},a.prototype.capitalize=function(a){return a.toLowerCase().replace(/\b./g,function(a){return a.toUpperCase()})},a}(),f=function(){function a(a){var b,d,e;if(this.config=a,this.element=document.querySelectorAll(this.config.element||"#gridedit")[0],this.headers=[],this.rows=[],this.cols=[],this.source=this.config.rows,this.redCells=[],this.activeCells=[],this.copiedCells=[],this.copiedValues=[],this.selectionStart=null,this.selectionEnd=null,this.selectedCol=null,this.openCell=null,this.state="ready",this.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.topOffset=this.config.topOffset?this.config.topOffset:0,this.cellStyles={activeColor:"#FFE16F",uneditableColor:"#FFBBB3"},this.config.custom){e=this.config.custom;for(b in e)d=e[b],b in this.config.custom&&this.set(b,d);delete this.config.custom}this.config.initialize&&this.init(),this.contextMenu=new c(this.config.contextMenuItems,this)}return a.prototype.init=function(){this.config.beforeInit&&this.config.beforeInit(),this.build(),this.events(),this.render(),this.config.afterInit&&this.config.afterInit()},a.prototype.build=function(){var a,c,d,e,f,g,h,j,k,m,n,o,p,q,r;for(k=document.createElement("tr"),q=this.config.cols,d=m=0,o=q.length;o>m;d=++m)c=q[d],a=new b(c,this),this.cols.push(a),k.appendChild(a.element);for(j=document.createElement("thead"),j.appendChild(k),h=document.createElement("tbody"),r=this.source,d=n=0,p=r.length;p>n;d=++n)f=r[d],e=new i(f,this),this.rows.push(e),h.appendChild(e.element);return g=document.createElement("table"),l.prototype.setAttributes(g,{id:"editable-grid","class":this.config.tableClass}),g.appendChild(j),g.appendChild(h),this.tableEl=g},a.prototype.rebuild=function(a){var b,c;if(null==a&&(a=null),b=Object.create(this.config),null!==a)for(c in a)a[c]&&(b[c]=a[c]);return this.destroy(),this.constructor(b)},a.prototype.events=function(){var a,b,c;return c=this,b=c.moveTo,a=c.edit,document.onkeydown=function(d){var e,f,g,h,i,j;if(c.activeCell())switch(g=d.keyCode,i=d.shiftKey,f=d.ctrlKey,e=d.metaKey,j=function(a,b){var c;return c=String.fromCharCode(a),b?c:c.toLowerCase()},h=function(){return c.openCell?void 0:c.activeCell().showControl(j(g,i))},g){case 39:if(!c.activeCell().isBeingEdited())return b(c.nextCell());break;case 9:return b(i?c.previousCell():c.nextCell());case 37:return b(c.previousCell());case 38:return b(c.aboveCell());case 40:return b(c.belowCell());case 32:if(!c.openCell)return a(c.activeCell());break;case 67:return e||f?c.contextMenu.copy():h();case 86:return e||f?c.contextMenu.paste():h();case 88:return e||f?c.contextMenu.cut():h();case 90:return e||f?c.contextMenu.undo():h();case 13:break;case 16:break;case 17:break;case 91:break;case 8:if(!c.openCell)return d.preventDefault(),c["delete"]();break;case 46:if(!c.openCell)return d.preventDefault(),c["delete"]();break;default:return n.call([96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111],g)>=0&&(g-=48),h()}},window.onresize=function(){return c.openCell?l.prototype.setStyles(c.openCell.control,c.openCell.position()):void 0},window.onscroll=function(){return c.openCell?c.openCell.reposition():void 0},this.tableEl.oncontextmenu=function(){return!1},document.onclick=function(a){var b;return c.isDescendant(a.target)||a.target===(null!=(b=c.activeCell())?b.control:void 0)?void 0:l.prototype.clearActiveCells(c)}},a.prototype.render=function(){return this.element.hasChildNodes()&&(this.element=document.querySelectorAll(this.config.element||"#gridedit")[0]),this.element.appendChild(this.tableEl)},a.prototype.set=function(a,b){return void 0!==a?this.config[a]=b:void 0},a.prototype.getCell=function(a,b){return this.rows[a].cells[b]},a.prototype.activeCell=function(){return this.activeCells.length>1?this.activeCells:this.activeCells[0]},a.prototype.nextCell=function(){var a;return null!=(a=this.activeCell())?a.next():void 0},a.prototype.previousCell=function(){var a;return null!=(a=this.activeCell())?a.previous():void 0},a.prototype.aboveCell=function(){var a;return null!=(a=this.activeCell())?a.above():void 0},a.prototype.belowCell=function(){var a;return null!=(a=this.activeCell())?a.below():void 0},a.prototype.moveTo=function(a,b){var c,d,e,f,g;return a&&(void 0===b&&(b=a.table.activeCell()),d=a.table.getDirection(b,a),a.beforeNavigateTo&&(c=a.beforeNavigateTo(a,b,d)),c!==!1&&(a.isVisible()||(g=a.table.activeCell().address[0],f=a.address[0],e=1,g>f&&(e=-1),window.scrollBy(0,(null!=a?a.position().height:void 0)*e)),a.makeActive())),!1},a.prototype.getDirection=function(a,b){var c,d,e,f,g;return e=a.address[0],g=b.address[0],d=a.address[1],f=b.address[1],e===g?d>f?c="left":f>d?c="right":console.log("Cannot calculate direction going from cell "+a.address+" to cell "+b.address):e>g?c="up":g>e?c="down":console.log("Cannot calculate direction going from cell "+a.address+" to cell "+b.address),c},a.prototype.edit=function(a,b){return null==b&&(b=null),null!==b?null!=a?a.edit(b):void 0:(null!=a&&a.edit(),!1)},a.prototype["delete"]=function(){var a,b,c,d,e;for(d=this.activeCells,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.value(""));return e},a.prototype.clearActiveCells=function(){return l.prototype.clearActiveCells(this)},a.prototype.setSelection=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(this.selectionStart!==this.selectionEnd){for(l=this.activeCells,f=0,h=l.length;h>f;f++)a=l[f],a.removeFromSelection();for(this.activeCells=[],e=function(){o=[];for(var a=m=this.selectionStart.address[0],b=this.selectionEnd.address[0];b>=m?b>=a:a>=b;b>=m?a++:a--)o.push(a);return o}.apply(this),c=function(){p=[];for(var a=n=this.selectionStart.address[1],b=this.selectionEnd.address[1];b>=n?b>=a:a>=b;b>=n?a++:a--)p.push(a);return p}.apply(this),g=0,i=e.length;i>g;g++)for(d=e[g],k=0,j=c.length;j>k;k++)b=c[k],this.rows[d].cells[b].addToSelection()}},a.prototype.data=function(){var a,b,c,d,e,f,g,h,i,j;for(b=[],i=this.rows,e=0,g=i.length;g>e;e++){for(c=i[e],d=[],j=c.cells,f=0,h=j.length;h>f;f++)a=j[f],d.push(a.cellTypeObject.value());b.push(d)}return b},a.prototype.repopulate=function(){var a,b,c,d,e,f;for(e=this.rows,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(){var c,d,e,f;for(e=b.cells,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.value(a.source[a.valueKey]));return f}());return f},a.prototype.destroy=function(){var a,b;this.element.removeChild(this.tableEl),b=[];for(a in this)b.push(delete this[a]);return b},a.prototype.isDescendant=function(a){var b;for(b=a.parentNode;null!=b;){if(b===this.tableEl)return!0;b=b.parentNode}return!1},a}(),b=function(){function a(a,b){var c,d,e;this.attributes=a,this.table=b,this.id=this.index=this.table.cols.length,this.cellClass=this.attributes.cellClass,this.cells=[],this.element=document.createElement("th"),this.textNode=document.createTextNode(this.attributes.label),this.element.appendChild(this.textNode),e=this.attributes;for(c in e)d=e[c],this[c]=d;delete this.attributes,this.events()}return a.prototype.next=function(){return this.table.cols[this.index+1]},a.prototype.previous=function(){return this.table.cols[this.index-1]},a.prototype.makeActive=function(){return this.element.classList.add("active"),this.table.selectedCol=this},a.prototype.makeInactive=function(){return this.element.classList.remove("active"),this.table.selectedCol=null},a.prototype.events=function(){var a,b;return a=this,b=a.table,this.element.onclick=function(){var c,d,e,f,g;for(l.prototype.clearActiveCells(b),a.makeActive(),f=a.cells,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.addToSelection());return g},this.element.onmousedown=function(c){return 3===c.which?void b.contextMenu.show(c.x,c.y,a.cells[0]):!1}},a}(),i=function(){function b(b,c){var d,e,f,g,h,i;for(this.attributes=b,this.table=c,this.id=this.table.rows.length,this.cells=[],this.index=this.table.rows.length,this.element=document.createElement("tr"),this.editable=!0,l.prototype.setAttributes(this.element,{id:"row-"+this.id}),i=this.table.cols,f=g=0,h=i.length;h>g;f=++g)e=i[f],d=new a(this.attributes[e.valueKey],this),this.cells.push(d),this.table.cols[f].cells.push(d),this.element.appendChild(d.element);delete this.attributes}return b.prototype.below=function(){return this.table.rows[this.index+1]},b.prototype.above=function(){return this.table.rows[this.index-1]},b}(),a=function(){function a(a,b){var c;if(this.originalValue=a,this.row=b,this.id=""+this.row.id+"-"+this.row.cells.length,this.address=[this.row.id,this.row.cells.length],this.index=this.row.cells.length,this.table=this.row.table,this.col=this.table.cols[this.index],this.type=this.col.type,this.meta=this.col,this.editable=this.col.editable!==!1,this.element=document.createElement("td"),this.col.cellClass&&this.element.classList.add(this.col.cellClass),this.values=[this.originalValue],this.previousValue=null,this.valueKey=this.col.valueKey,this.source=this.table.config.rows[this.address[0]],this.initCallbacks(),this.col.style)for(c in this.col.style)this.element.style[c]=this.col.style[c];switch(this.type){case"string":this.cellTypeObject=new k(this);break;case"number":this.cellTypeObject=new h(this);break;case"date":this.cellTypeObject=new d(this);break;case"html":this.cellTypeObject=new g(this);break;case"select":this.cellTypeObject=new j(this)}this.events(this)}return a.prototype.initCallbacks=function(){return this.table.config.beforeEdit&&(this.beforeEdit=this.table.config.beforeEdit),this.table.config.afterEdit&&(this.afterEdit=this.table.config.afterEdit),this.table.config.beforeCellActivate&&(this.beforeActivate=this.table.config.beforeCellActivate),this.table.config.afterCellActivate&&(this.afterActivate=this.table.config.afterCellActivate),this.table.config.beforeControlInit&&(this.beforeControlInit=this.table.config.beforeControlInit),this.table.config.afterControlInit&&(this.afterControlInit=this.table.config.afterControlInit),this.table.config.beforeControlHide&&(this.beforeControlHide=this.table.config.beforeControlHide),this.table.config.afterControlHide&&(this.afterControlHide=this.table.config.afterControlHide),this.table.config.onCellClick&&(this.onClick=this.table.config.onCellClick),this.table.config.beforeCellNavigateTo?this.beforeNavigateTo=this.table.config.beforeCellNavigateTo:void 0},a.prototype.value=function(a){var b;return null==a&&(a=null),null!==a&&a!==this.element.textContent?(a=this.cellTypeObject.formatValue(a),b=this.value(),this.beforeEdit&&this.beforeEdit(this,b,a),this.previousValue=this.element.textContent,this.values.push(a),this.element.textContent=a,this.cellTypeObject.setValue(a),l.prototype.setStyles(this.control,this.position()),this.afterEdit&&this.afterEdit(this,b,a,this.table.contextMenu.getTargetPasteCell()),a):this.cellTypeObject.render()},a.prototype.makeActive=function(){var a;return this.beforeActivate&&(a=this.beforeActivate(this)),(this.beforeActivate&&a!==!1||!this.beforeActivate)&&(l.prototype.clearActiveCells(this.table),this.showActive(),this.table.activeCells.push(this),this.table.selectionStart=this,this.table.openCell&&this.table.openCell.edit(this.table.openCell.control.value),this.afterActivate)?this.afterActivate(this):void 0},a.prototype.makeInactive=function(){return this.showInactive()},a.prototype.addToSelection=function(){return this.showActive(),this.table.activeCells.push(this)},a.prototype.isActive=function(){return-1!==this.table.activeCells.indexOf(this)},a.prototype.removeFromSelection=function(){return this.showInactive()},a.prototype.showActive=function(){var a;return a=this.element.style.cssText,this.oldCssText=a,this.element.style.cssText=a+" "+("background-color: "+this.table.cellStyles.activeColor+";")},a.prototype.showInactive=function(){return this.element.style.cssText=this.oldCssText},a.prototype.showRed=function(){return this.element.style.cssText="background-color: "+this.table.cellStyles.uneditableColor+";",this.table.redCells.push(this)},a.prototype.showControl=function(a){var b,c;return null==a&&(a=null),this.table.contextMenu.borderedCells.length>0&&this.table.contextMenu.hideBorders(),this.editable?(this.beforeControlInit&&(b=this.beforeControlInit(this)),(this.beforeControlInit&&b!==!1||!this.beforeControlInit)&&(null!==a?(this.control.value=a,c=this.control,setTimeout(function(){return c.focus()},0)):this.cellTypeObject.initControl(),this.control.style.position="fixed",l.prototype.setStyles(this.control,this.position()),this.table.element.appendChild(this.control),this.table.openCell=this,this.afterControlInit)?this.afterControlInit(this):void 0):this.showRed()},a.prototype.hideControl=function(){var a;return null!==this.table.openCell&&(this.beforeControlHide&&(a=this.beforeControlHide(this)),(this.beforeControlHide&&a!==!1||!this.beforeControlHide)&&(this.isControlInDocument()&&this.control.remove(),this.table.openCell=null,this.afterControlHide))?this.afterControlHide(this):void 0},a.prototype.edit=function(a){return null==a&&(a=null),this.editable?null!==a?(this.value(a),this.isBeingEdited()?this.hideControl():this.edit()):(this.showControl(),this.control.focus(),this.cellTypeObject.select()):this.showRed()},a.prototype.position=function(){return this.element.getBoundingClientRect()},a.prototype.isVisible=function(){var a;return a=this.position(),a.top>=this.table.topOffset&&a.bottom<=window.innerHeight},a.prototype.isControlInDocument=function(){return null!==this.control.parentNode},a.prototype.reposition=function(){return l.prototype.setStyles(this.control,this.position())},a.prototype.next=function(){var a;return this.row.cells[this.index+1]||(null!=(a=this.row.below())?a.cells[0]:void 0)},a.prototype.previous=function(){var a;return this.row.cells[this.index-1]||(null!=(a=this.row.above())?a.cells[this.row.cells.length-1]:void 0)},a.prototype.above=function(){var a;return null!=(a=this.row.above())?a.cells[this.index]:void 0},a.prototype.below=function(){var a;return null!=(a=this.row.below())?a.cells[this.index]:void 0},a.prototype.isBefore=function(a){return a.address[0]===this.address[0]&&a.address[1]>this.address[1]},a.prototype.isAfter=function(a){return a.address[0]===this.address[0]&&a.address[1]<this.address[1]},a.prototype.isAbove=function(a){return a.address[0]>this.address[0]&&a.address[1]===this.address[1]},a.prototype.isBelow=function(a){return a.address[0]<this.address[0]&&a.address[1]===this.address[1]},a.prototype.addClass=function(a){return this.element.classList.add(a)},a.prototype.removeClass=function(a){return this.element.classList.remove(a)},a.prototype.isBeingEdited=function(){return null!=this.control.parentNode},a.prototype.events=function(a){var b,c,d,e;return e=a.table,c=e.redCells,b=e.activeCells,this.element.onclick=function(b){var c;return a.onClick&&(c=a.onClick(a,b)),c===!1?!1:void 0},this.element.ondblclick=function(){return a.edit()},this.element.onmousedown=function(b){return 3===b.which?void e.contextMenu.show(b.x,b.y,a):(e.state="selecting",a.makeActive(),!1)},this.element.onmouseover=function(){return"selecting"===e.state?(e.selectionEnd=a,e.setSelection()):void 0},this.element.onmouseup=function(b){return 3!==b.which?(e.selectionEnd=a,e.setSelection(),e.state="ready"):void 0},this.control.onkeydown=function(b){var c,d;switch(c=b.which){case 13:return a.edit(this.value),null!=(d=a.below())?d.makeActive():void 0;case 9:return a.edit(this.value),moveTo(e.nextCell())}},this.cellTypeObject.addControlEvents(a),e.mobile?(d=null,this.element.ontouchstart=function(a){return d=a.changedTouches[0].clientY,l.prototype.clearActiveCells(e),e.openCell?e.openCell.hideControl():void 0},this.element.ontouchend=function(b){var c;return c=b.changedTouches[0].clientY,b.changedTouches.length<2&&c===d?(b.preventDefault(),a.edit()):void 0}):void 0},a}(),c=function(){function a(a,b){var c,d,e,f,g,h,i,j,k,m,n;for(this.userDefinedActions=a,this.table=b,e=/Mac/.test(navigator.platform)?"Cmd":"Ctrl",this.defaultActions=[{name:"Cut",value:"cut",shortCut:e+"+X"},{name:"Copy",value:"copy",shortCut:e+"+C"},{name:"Paste",value:"paste",shortCut:e+"+V"},{name:"Undo",value:"undo",shortCut:e+"+Z"},{name:"Fill",value:"fill",shortCut:""}],this.element=document.createElement("div"),this.element.style.position="fixed",this.actionNodes={},this.borderedCells=[],l.prototype.setAttributes(this.element,{id:"contextMenu","class":"dropdown clearfix"}),j=document.createElement("ul"),l.prototype.setAttributes(j,{"class":"dropdown-menu",role:"menu","aria-labelledby":"aria-labelledby",style:"display:block;position:static;margin-bottom:5px;"}),g=document.createElement("li"),l.prototype.setAttributes(g,{"class":"divider"}),n=this.defaultActions,k=0,m=n.length;m>k;k++)d=n[k],h=document.createElement("li"),f=document.createElement("div"),i=document.createElement("span"),i.textContent=d.shortCut,i.setAttribute("name",d.name),l.prototype.setAttributes(i,{style:"float: right !important;"}),c=document.createElement("a"),c.textContent=d.name,c.setAttribute("name",d.name),l.prototype.setAttributes(c,{"class":"enabled",tabIndex:"-1"}),"Fill"===d.name&&j.appendChild(g),c.appendChild(i),h.appendChild(c),this.actionNodes[d]=h,j.appendChild(h);this.element.appendChild(j),this.events(this)}return a.prototype.show=function(a,b,c){return c.isActive()||c.makeActive(),this.cells=c.table.activeCells,l.prototype.setStyles(this.element,{left:a,top:b}),this.table.tableEl.appendChild(this.element)},a.prototype.hide=function(){return this.isVisible()?this.table.tableEl.removeChild(this.element):void 0},a.prototype.isVisible=function(){return null!=this.element.parentNode},a.prototype.getTargetPasteCell=function(){return this.table.activeCells.sort(this.sortFunc)[0]},a.prototype.sortFunc=function(a,b){return a.address[0]-b.address[0]},a.prototype.displayBorders=function(){var a,b,c,d,e,f;if(this.borderedCells=this.table.activeCells,this.borderedCells.length>1){for(e=this.borderedCells,f=[],b=c=0,d=e.length;d>c;b=++c)a=e[b],0===b?(a.element.style.borderTop="2px dashed blue",a.element.style.borderLeft="2px dashed blue",f.push(a.element.style.borderRight="2px dashed blue")):b===this.table.activeCells.length-1?(a.element.style.borderBottom="2px dashed blue",a.element.style.borderLeft="2px dashed blue",f.push(a.element.style.borderRight="2px dashed blue")):(a.element.style.borderLeft="2px dashed blue",f.push(a.element.style.borderRight="2px dashed blue"));return f}return this.borderedCells[0].element.style.border="2px dashed blue"},a.prototype.hideBorders=function(){var a,b,c,d,e;for(e=this.borderedCells,b=c=0,d=e.length;d>c;b=++c)a=e[b],a.element.style.border="";return this.borderedCells=[],this.table.copiedValues=[],this.table.copiedCells=[]},a.prototype.cut=function(){var a,b,c,d,e;if(a=this.beforeAction("cut")){for(this.table.copiedValues=[],this.table.copiedCells=this.table.activeCells,e=this.table.activeCells,c=0,d=e.length;d>c;c++)b=e[c],this.table.copiedValues.push(b.value()),b.value("");return this.afterAction("cut")}},a.prototype.copy=function(){var a,b,c,d,e;if(a=this.beforeAction("copy")){for(this.table.copiedValues=[],this.table.copiedCells=this.table.activeCells,e=this.table.activeCells,c=0,d=e.length;d>c;c++)b=e[c],this.table.copiedValues.push(b.value());return this.afterAction("copy")}},a.prototype.paste=function(){var a,b,c,d,e,f,g,h,i,j,k;if(b=this.beforeAction("paste")){if(c=this.getTargetPasteCell(),this.table.copiedValues.length>1)for(j=this.table.copiedValues,d=f=0,h=j.length;h>f;d=++f)e=j[d],c.value(this.table.copiedValues[d]),c=c.below();else for(k=this.table.activeCells,d=g=0,i=k.length;i>g;d=++g)a=k[d],a.value(this.table.copiedValues[0]);return this.afterAction("paste")}},a.prototype.undo=function(){var a,b;return a=this.beforeAction("undo"),a?(b=this.cell.values.pop(),this.cell.value(b),this.afterAction("undo")):void 0},a.prototype.fill=function(){var a,b,c,d,e,f,g;if(a=this.beforeAction("fill")){for(d=this.getTargetPasteCell().value(),g=this.table.activeCells,c=e=0,f=g.length;f>e;c=++e)b=g[c],b.value(d);return this.afterAction("fill")}},a.prototype.beforeAction=function(a){switch(a){case"cut":return!0;case"copy":return!0;case"paste":return this.getTargetPasteCell().editable?!0:!1;case"undo":return!0;case"fill":return this.getTargetPasteCell().editable?!0:!1}},a.prototype.afterAction=function(a){switch(a){case"cut":this.displayBorders();break;case"copy":this.displayBorders();break;case"paste":this.hideBorders();break;case"undo":break;case"fill":}return this.hide()},a.prototype.toggle=function(a){var b;return b=this.actionNodes[a].classList,b.toggle("enabled"),b.toggle("disabled")},a.prototype.events=function(a){return this.element.onclick=function(b){var c;switch(c=b.target.getAttribute("name"),console.log(c),c){case"Cut":return a.cut();case"Copy":return a.copy();case"Paste":return a.paste();case"Undo":return a.undo();case"Fill":return a.fill()}}},a}(),e=function(){function a(a){var b;this.cell=a,b=document.createTextNode(this.cell.originalValue),this.cell.control=document.createElement("input"),this.cell.element.appendChild(b)}return a.prototype.initControl=function(){return this.cell.control.value=this.cell.value()},a.prototype.formatValue=function(a){return a},a.prototype.setValue=function(a){return this.cell.source[this.cell.valueKey]=a},a.prototype.addControlEvents=function(){},a.prototype.value=function(){return this.cell.value()},a.prototype.render=function(){return this.cell.element.textContent},a.prototype.select=function(){return this.cell.control.select()},a}(),k=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b}(e),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.formatValue=function(a){return Number(a)},b.prototype.setValue=function(a){return this.cell.source[this.cell.valueKey]=Number(a)},b}(e),d=function(a){function b(a){var b;this.cell=a,b=document.createTextNode(this.toDateString(this.cell.originalValue)),this.cell.control=this.toDate(),this.cell.originalValue&&(this.cell.control.valueAsDate=new Date(this.cell.originalValue)),this.cell.element.appendChild(b)}return p(b,a),b.prototype.formatValue=function(a){return a.length>0?this.toDateString(Date.parse(a)):a instanceof Date?this.toDateString(a):0===a.length?(this.cell.control.valueAsDate=null,""):void 0},b.prototype.setValue=function(a){return this.cell.source[this.cell.valueKey]=new Date(a),this.cell.control.valueAsDate=new Date(a)},b.prototype.initControl=function(){return b.__super__.initControl.call(this),this.cell.control.value=this.toDateInputString(this.cell.value())},b.prototype.addControlEvents=function(a){return this.cell.control.onchange=function(b){return a.edit(b.target.value)}},b.prototype.value=function(){return this.cell.control.valueAsDate},b.prototype.toDateString=function(a){var b;return null==a&&(a=null),a&&""!==a?b=new Date(a):this.value()&&(b=new Date(this.value())),b instanceof Date?("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2)+"-"+b.getFullYear():""},b.prototype.toDate=function(){var a;return a=document.createElement("input"),a.type="date",a.value=this.toDateString(),a},b.prototype.toDateInputString=function(a){var b;return null==a&&(a=null),a&&""!==a?b=new Date(a):this.value()&&(b=new Date(this.value())),b instanceof Date?b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2):""},b}(e),g=function(a){function b(a){var b;this.cell=a,this.cell.htmlContent=this.cell.originalValue,b=this.toFragment(),this.cell.control=document.createElement("input"),this.cell.element.appendChild(b)}return p(b,a),b.prototype.setValue=function(a){var b;return this.cell.htmlContent=a,b=this.toFragment(),this.cell.element.innerHTML="",this.cell.element.appendChild(b)},b.prototype.toFragment=function(){var a,b;return a=document.createElement("div"),b=document.createDocumentFragment(),a.innerHTML=this.cell.htmlContent,b.appendChild(a.firstChild||document.createTextNode("")),b},b.prototype.render=function(){return this.htmlContent},b}(e),j=function(a){function b(a){var b;this.cell=a,b=document.createTextNode(this.cell.originalValue||""),this.cell.control=this.initControl,this.cell.element.appendChild(b)}return p(b,a),b.prototype.initControl=function(){var a,b,c,d,e,f,g,h,i,j;for(d=document.createElement("select"),this.cell.meta.choices||console.log("There is not a 'choices' key in cell "+this.cell.address+" and you specified that it was of type 'select'"),j=this.cell.meta.choices,f=0,h=j.length;h>f;f++){if(a=j[f],c=document.createElement("option"),a instanceof Array)for(b=g=0,i=a.length;i>g;b=++g)e=a[b],0===b&&(c.value=e),1===b&&(c.text=e);else c.value=c.text=a;this.cell.value()===a&&(c.selected=!0),d.add(c)}return d.classList.add("form-control"),this.cell.control=d,this.cell.control.onchange=function(a){return this.cell.edit(a.target.value)}},b.prototype.addControlEvents=function(a){return this.cell.control.onchange=function(b){return a.edit(b.target.value)}},b.prototype.select=function(){},b}(e),m="undefined"!=typeof exports&&null!==exports?exports:window,m.GridEdit=f}).call(this);